angular.module('unity-site')
  .factory('assignmentFactory', ['$http', '$q'
    ($http, $q) ->
      factory = {};

      factory.assignments = null;

      factory.getAll = () ->
        deferred = $q.defer();
        if factory.assignments?
          deferred.resolve(factory.assignments);
        else
          $http.get("<%= asset_path 'assignments/data/assignments.json' %>")
            .then((response)->
              factory.assignments = response.data;
              deferred.resolve(factory.assignments);
            )
        return deferred.promise;

      return factory;
  ]);
